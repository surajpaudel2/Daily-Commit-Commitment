spring.application.name=EnterpriseAuthenticationSystem

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
# Port where your Spring Boot app runs
server.port=8080

# Session cookie configuration for security
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
# Note: Set secure=true in production with HTTPS
server.servlet.session.cookie.same-site=lax


# ============================================================================
# LOGGING CONFIGURATION (for debugging OAuth flow)
# ============================================================================
# This will show you exactly what Spring Security is doing during the OAuth flow
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG

# Show SQL queries (optional, useful for JPA later)
logging.level.org.hibernate.SQL=DEBUG


# ============================================================================
# OAUTH2 CLIENT CONFIGURATION (for OIDC Login Flow)
# ============================================================================

# --- Keycloak Client Registration ---
# This is the "ID card" of your Spring Boot app in Keycloak
spring.security.oauth2.client.registration.keycloak.client-id=my-spring-app
spring.security.oauth2.client.registration.keycloak.client-secret=YOUR_CLIENT_SECRET_FROM_KEYCLOAK

# Authorization Grant Type
# "authorization_code" = OAuth 2.1 flow with PKCE
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code

# Where Keycloak should redirect the user after login
# This must match EXACTLY what you configure in Keycloak
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
# {baseUrl} = http://localhost:8080
# {registrationId} = keycloak
# Final URL: http://localhost:8080/login/oauth2/code/keycloak

# Scopes: What information you want from Keycloak
# openid = Required for OIDC (gives you ID token)
# profile = User's name, username, etc.
# email = User's email address
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email

# Client Name (displayed in logs and UI)
spring.security.oauth2.client.registration.keycloak.client-name=Keycloak


# --- Keycloak Provider Configuration (OIDC Discovery) ---
# This is the "smart" part - Spring Security will auto-discover all endpoints
# Keycloak's issuer URI format: http://{host}:{port}/realms/{realm-name}
spring.security.oauth2.client.provider.keycloak.issuer-uri=http://localhost:8180/realms/master

# What Spring Security will auto-discover from the issuer-uri:
# - authorization-endpoint: Where to send user for login
# - token-endpoint: Where to exchange code for tokens
# - userinfo-endpoint: Where to get user profile info
# - jwk-set-uri: Where to get public keys for JWT validation
# - end-session-endpoint: Where to send user for logout
#
# You can see all discovered endpoints at:
# http://localhost:8180/realms/master/.well-known/openid-configuration


# ============================================================================
# OAUTH2 RESOURCE SERVER CONFIGURATION (for JWT Validation)
# ============================================================================
# This tells Spring Security how to validate JWTs sent in API requests
# Uses the same issuer-uri to download Keycloak's public keys

spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8180/realms/master

# What this does:
# 1. Downloads public keys from: {issuer-uri}/protocol/openid-connect/certs
# 2. Validates JWT signature using those keys
# 3. Checks JWT claims (issuer, expiry, audience)
# 4. If valid ? User is authenticated
# 5. If invalid ? Returns 401 Unauthorized


# ============================================================================
# APPLICATION-SPECIFIC PROPERTIES (Optional - for your business logic)
# ============================================================================
# You can add your own properties here
app.version=1.0.0

# CORS configuration (if your React app is on different port)
# We'll configure this in SecurityConfig.java
app.cors.allowed-origins=http://localhost:3000

# JWT claim name for roles (Keycloak stores roles here)
# We'll use this in CustomJwtConverter
app.jwt.roles-claim-name=realm_access.roles